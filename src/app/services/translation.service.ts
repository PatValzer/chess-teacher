import { Injectable, signal } from '@angular/core';

export type Language = 'en' | 'it';

@Injectable({
  providedIn: 'root',
})
export class TranslationService {
  currentLang = signal<Language>('en');

  private translations: Record<Language, Record<string, string>> = {
    en: {
      'SETTINGS.TITLE': 'Board Settings',
      'SETTINGS.GAME_SETTINGS': 'Game Settings',
      'SETTINGS.WHITE_PLAYER': 'White Player',
      'SETTINGS.BLACK_PLAYER': 'Black Player',
      'SETTINGS.HUMAN': 'Human',
      'SETTINGS.COMPUTER': 'Computer',
      'SETTINGS.WHITE_ELO': 'White Computer ELO',
      'SETTINGS.BLACK_ELO': 'Black Computer ELO',
      'SETTINGS.BEGINNER': 'Beginner',
      'SETTINGS.GRANDMASTER': 'Grandmaster',
      'SETTINGS.BOARD_THEME': 'Board Theme',
      'SETTINGS.PIECE_SET': 'Piece Set',
      'SETTINGS.LANGUAGE': 'Language',
      'SETTINGS.CANCEL': 'Cancel',
      'SETTINGS.SAVE': 'Save Changes',

      'THEME.DEFAULT': 'Standard (Brown)',
      'THEME.WOOD': 'Classic Wood',
      'THEME.MARBLE': 'Elegant Marble',
      'THEME.GREEN': 'Forest (Green)',
      'THEME.BLUE': 'Ocean (Blue)',
      'THEME.PURPLE': 'Royal (Purple)',

      'GAME.STATUS': 'Game Status',
      'GAME.TURN': 'Turn',
      'GAME.WHITE_TURN': "White's Turn",
      'GAME.BLACK_TURN': "Black's Turn",
      'GAME.CHECK': 'Check!',
      'GAME.CHECKMATE': 'Checkmate',
      'GAME.DRAW': 'Draw',
      'GAME.STALEMATE': 'Stalemate',
      'GAME.MOVES': 'Moves',
      'GAME.FLIP': 'Flip Board',
      'GAME.RESET': 'Reset Game',
      'GAME.SETTINGS': 'Settings',
      'GAME.ANALYZE': 'Analyze',
      'GAME.START': 'Start Game',
      'GAME.UNDO': 'Undo',
      'GAME.REDO': 'Redo',
      'GAME.WAITING_OPPONENT': 'Waiting for opponent...',
      'GAME.CONNECTED': 'Connected',
      'GAME.DISCONNECTED': 'Disconnected',
      'GAME.NAV_START': 'Start of Game',
      'GAME.NAV_PREV': 'Previous Move',
      'GAME.NAV_NEXT': 'Next Move',
      'GAME.NAV_END': 'Current Position',
      'GAME.PLAY_ONLINE': 'Play Online',
      'GAME.DISCONNECT': 'Disconnect',
      'GAME.CONNECTING': 'Connecting...',
      'GAME.PLAYING_AS': 'You are playing as',
      'GAME.WHITE': 'White',
      'GAME.BLACK': 'Black',

      'P2P.TITLE': 'Peer-to-Peer Connection',
      'P2P.CHOOSE_ROLE': 'Choose how you want to connect:',
      'P2P.HOST_GAME': 'Host Game',
      'P2P.HOST_DESC': 'Create a new game and share the code',
      'P2P.JOIN_GAME': 'Join Game',
      'P2P.JOIN_DESC': 'Connect to an existing game',
      'P2P.HOW_IT_WORKS': 'How it works:',
      'P2P.STEP1': 'One player hosts and shares a QR code or text code',
      'P2P.STEP2': 'The other player scans or pastes the code',
      'P2P.STEP3': 'The joining player shares their response code back',
      'P2P.STEP4': 'Direct peer-to-peer connection established!',
      'P2P.SHARE_CODE': 'Share this code with your opponent:',
      'P2P.COPY_CODE': 'Copy Code',
      'P2P.SHOW_CODE': 'Show text code',
      'P2P.PASTE_RESPONSE': 'After they scan, paste their response code here:',
      'P2P.PASTE_RESPONSE_PH': 'Paste the response code from your opponent...',
      'P2P.SCAN_OR_PASTE': 'Scan the QR code or paste the connection code:',
      'P2P.PASTE_OFFER_PH': 'Paste the connection code from the host...',
      'P2P.SHARE_RESPONSE': 'Share this response code with the host:',
      'P2P.COPY_RESPONSE': 'Copy Response Code',
      'P2P.WAITING_HOST': 'Waiting for host to complete connection...',
      'P2P.CONNECTED_TITLE': 'Connected!',
      'P2P.P2P_SUCCESS': 'Peer-to-peer connection established successfully.',
      'P2P.STARTING': 'Starting game...',
      'P2P.GEN_CODE': 'Generating connection code...',
      'P2P.PROCESSING': 'Processing...',
      'P2P.NEXT': 'Next',
      'P2P.CONNECT': 'Connect',

      'OPENING.TITLE': 'Opening Explorer',
      'OPENING.LOADING': 'Loading...',
      'OPENING.NO_GAMES': 'No master games found in this position.',
      'OPENING.GAMES': 'games',
      'OPENING.WHITE_WINS': 'White Wins',
      'OPENING.DRAWS': 'Draws',
      'OPENING.BLACK_WINS': 'Black Wins',

      'ANALYSIS.TITLE': 'Engine Analysis',
      'ANALYSIS.DEPTH': 'Depth:',
      'ANALYSIS.BEST_MOVE': 'Best Move:',
      'ANALYSIS.CALCULATING': 'Calculating...',
      'ANALYSIS.LINE': 'Line:',
      'ANALYSIS.SHOW_HINT': 'ðŸ’¡ Show Hint',
      'ANALYSIS.MAKE_MOVE': 'Make a move to see analysis',

      'AI.TRY': 'Try',
      'AI.THINKING': 'Thinking...',
      'AI.READY': 'Ready to analyze!',
      'AI.WELCOME_TITLE': 'Hello!',
      'AI.ASK_LEVEL': "I'm your chess teacher. What is your chess level?",
      'AI.LEVEL_BEGINNER': 'Beginner',
      'AI.LEVEL_INTERMEDIATE': 'Intermediate',
      'AI.LEVEL_ADVANCED': 'Advanced',
      'AI.LEVEL_SAVED': 'Great! I will tailor my advice for a {level} player.',
    },
    it: {
      'SETTINGS.TITLE': 'Impostazioni Scacchiera',
      'SETTINGS.GAME_SETTINGS': 'Impostazioni Partita',
      'SETTINGS.WHITE_PLAYER': 'Giocatore Bianco',
      'SETTINGS.BLACK_PLAYER': 'Giocatore Nero',
      'SETTINGS.HUMAN': 'Umano',
      'SETTINGS.COMPUTER': 'Computer',
      'SETTINGS.WHITE_ELO': 'ELO Computer Bianco',
      'SETTINGS.BLACK_ELO': 'ELO Computer Nero',
      'SETTINGS.BEGINNER': 'Principiante',
      'SETTINGS.GRANDMASTER': 'Grande Maestro',
      'SETTINGS.BOARD_THEME': 'Tema Scacchiera',
      'SETTINGS.PIECE_SET': 'Set Pezzi',
      'SETTINGS.LANGUAGE': 'Lingua',
      'SETTINGS.CANCEL': 'Annulla',
      'SETTINGS.SAVE': 'Salva Modifiche',

      'THEME.DEFAULT': 'Standard (Marrone)',
      'THEME.WOOD': 'Legno Classico',
      'THEME.MARBLE': 'Marmo Elegante',
      'THEME.GREEN': 'Foresta (Verde)',
      'THEME.BLUE': 'Oceano (Blu)',
      'THEME.PURPLE': 'Reale (Viola)',

      'GAME.STATUS': 'Stato Partita',
      'GAME.TURN': 'Turno',
      'GAME.WHITE_TURN': 'Turno del Bianco',
      'GAME.BLACK_TURN': 'Turno del Nero',
      'GAME.CHECK': 'Scacco!',
      'GAME.CHECKMATE': 'Scacco Matto',
      'GAME.DRAW': 'Patta',
      'GAME.STALEMATE': 'Stallo',
      'GAME.MOVES': 'Mosse',
      'GAME.FLIP': 'Ruota Scacchiera',
      'GAME.RESET': 'Nuova Partita',
      'GAME.SETTINGS': 'Impostazioni',
      'GAME.ANALYZE': 'Analizza',
      'GAME.START': 'Inizia Partita',
      'GAME.UNDO': 'Annulla',
      'GAME.REDO': 'Ripeti',
      'GAME.WAITING_OPPONENT': 'In attesa avversario...',
      'GAME.CONNECTED': 'Connesso',
      'GAME.DISCONNECTED': 'Disconnesso',
      'GAME.NAV_START': 'Inizio Partita',
      'GAME.NAV_PREV': 'Mossa Precedente',
      'GAME.NAV_NEXT': 'Mossa Successiva',
      'GAME.NAV_END': 'Posizione Corrente',
      'GAME.PLAY_ONLINE': 'Gioca Online',
      'GAME.DISCONNECT': 'Disconnetti',
      'GAME.CONNECTING': 'Connessione in corso...',
      'GAME.PLAYING_AS': 'Stai giocando come',
      'GAME.WHITE': 'Bianco',
      'GAME.BLACK': 'Nero',

      'P2P.TITLE': 'Connessione Peer-to-Peer',
      'P2P.CHOOSE_ROLE': 'Scegli come connetterti:',
      'P2P.HOST_GAME': 'Ospita Partita',
      'P2P.HOST_DESC': 'Crea una nuova partita e condividi il codice',
      'P2P.JOIN_GAME': 'Unisciti alla Partita',
      'P2P.JOIN_DESC': 'Connettiti a una partita esistente',
      'P2P.HOW_IT_WORKS': 'Come funziona:',
      'P2P.STEP1': 'Un giocatore ospita e condivide un codice QR o testuale',
      'P2P.STEP2': "L'altro giocatore scansiona o incolla il codice",
      'P2P.STEP3': 'Chi si unisce condivide il codice di risposta',
      'P2P.STEP4': 'Connessione diretta peer-to-peer stabilita!',
      'P2P.SHARE_CODE': 'Condividi questo codice con il tuo avversario:',
      'P2P.COPY_CODE': 'Copia Codice',
      'P2P.SHOW_CODE': 'Mostra codice testuale',
      'P2P.PASTE_RESPONSE': 'Dopo che hanno scansionato, incolla qui il codice risposta:',
      'P2P.PASTE_RESPONSE_PH': 'Incolla il codice risposta dal tuo avversario...',
      'P2P.SCAN_OR_PASTE': 'Scansiona il codice QR o incolla il codice connessione:',
      'P2P.PASTE_OFFER_PH': "Incolla il codice connessione dall'ospite...",
      'P2P.SHARE_RESPONSE': "Condividi questo codice risposta con l'ospite:",
      'P2P.COPY_RESPONSE': 'Copia Codice Risposta',
      'P2P.WAITING_HOST': "In attesa che l'ospite completi la connessione...",
      'P2P.CONNECTED_TITLE': 'Connesso!',
      'P2P.P2P_SUCCESS': 'Connessione peer-to-peer stabilita con successo.',
      'P2P.STARTING': 'Avvio partita...',
      'P2P.GEN_CODE': 'Generazione codice connessione...',
      'P2P.PROCESSING': 'Elaborazione...',
      'P2P.NEXT': 'Avanti',
      'P2P.CONNECT': 'Connetti',

      'OPENING.TITLE': 'Esploratore Aperture',
      'OPENING.LOADING': 'Caricamento...',
      'OPENING.NO_GAMES': 'Nessuna partita magistrale trovata in questa posizione.',
      'OPENING.GAMES': 'partite',
      'OPENING.WHITE_WINS': 'Vittorie Bianco',
      'OPENING.DRAWS': 'Patte',
      'OPENING.BLACK_WINS': 'Vittorie Nero',

      'ANALYSIS.TITLE': 'Analisi Motore',
      'ANALYSIS.DEPTH': 'ProfonditÃ :',
      'ANALYSIS.BEST_MOVE': 'Miglior Mossa:',
      'ANALYSIS.CALCULATING': 'Calcolando...',
      'ANALYSIS.LINE': 'Linea:',
      'ANALYSIS.SHOW_HINT': 'ðŸ’¡ Mostra Suggerimento',
      'ANALYSIS.MAKE_MOVE': 'Fai una mossa per analizzare',

      'AI.TRY': 'Prova',
      'AI.THINKING': 'Sto pensando...',
      'AI.READY': 'Pronto ad analizzare!',
      'AI.WELCOME_TITLE': 'Ciao!',
      'AI.ASK_LEVEL': 'Sono il tuo maestro di scacchi. Qual Ã¨ il tuo livello?',
      'AI.LEVEL_BEGINNER': 'Principiante',
      'AI.LEVEL_INTERMEDIATE': 'Intermedio',
      'AI.LEVEL_ADVANCED': 'Avanzato',
      'AI.LEVEL_SAVED': 'Ottimo! AdatterÃ² i miei consigli per un giocatore {level}.',
    },
  };

  setLanguage(lang: Language) {
    this.currentLang.set(lang);
  }

  translate(key: string): string {
    const lang = this.currentLang();
    return this.translations[lang][key] || key;
  }
}
