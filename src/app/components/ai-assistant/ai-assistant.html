<div
  class="ai-sidebar"
  *ngIf="isVisible()"
  [class.collapsed]="isCollapsed()"
  [class.analyzing]="isAnalyzing()"
>
  <!-- Toggle Tab (Always visible) -->
  <button
    class="toggle-tab"
    (click)="toggleCollapse()"
    [title]="isCollapsed() ? 'Show AI' : 'Hide AI'"
  >
    <span class="material-icons icon">{{ isCollapsed() ? 'chevron_left' : 'chevron_right' }}</span>
  </button>

  <!-- Content Area -->
  <div class="sidebar-inner">
    <div class="sidebar-header">
      <div class="title-row">
        <div class="avatar material-icons" [class.pulse]="isAnalyzing()">smart_toy</div>
        <span class="title">Coach</span>
      </div>
      <div class="actions">
        <button class="close-btn material-icons" (click)="close()" title="Turn Off AI">
          close
        </button>
      </div>
    </div>

    <div class="sidebar-body">
      <div class="message-box">
        <p class="message-text">{{ message() | translate }}</p>
      </div>

      <button *ngIf="suggestion() as move" class="suggestion-btn" (click)="onSuggestionClick()">
        {{ 'AI.TRY' | translate }} <span class="move-badge">{{ move }}</span>
      </button>

      <div class="level-selection" *ngIf="showLevelSelection()">
        <p class="select-label">Select skill level:</p>
        <button (click)="selectLevel('beginner')">
          <span class="emoji material-icons">sentiment_satisfied_alt</span>
          {{ 'AI.LEVEL_BEGINNER' | translate }}
        </button>
        <button (click)="selectLevel('intermediate')">
          <span class="emoji material-icons">school</span> {{ 'AI.LEVEL_INTERMEDIATE' | translate }}
        </button>
        <button (click)="selectLevel('advanced')">
          <span class="emoji material-icons">emoji_events</span>
          {{ 'AI.LEVEL_ADVANCED' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
