<div class="analysis-panel">
  <div class="panel-content">
    <!-- Left Column: Evaluation Bar & Score -->
    <div class="eval-container">
      <div class="eval-text">
        <span class="eval-value">{{ evaluationText() }}</span>
      </div>
      <div class="eval-bar-wrapper">
        <div class="eval-bar-black" [style.height.%]="100 - evaluationBar()"></div>
        <div class="eval-bar-white" [style.height.%]="evaluationBar()"></div>
      </div>
    </div>

    <!-- Right Column: Title & Analysis Info -->
    <div class="right-column">
      <h3 class="panel-title">{{ 'ANALYSIS.TITLE' | translate }}</h3>

      <!-- Analysis Info -->
      @if (analysis(); as a) {
      <div class="analysis-info">
        <div class="info-row">
          <span class="label">{{ 'ANALYSIS.DEPTH' | translate }}</span>
          <span class="value">{{ a.depth }}</span>
        </div>
        <div class="info-row">
          <span class="label">{{ 'ANALYSIS.BEST_MOVE' | translate }}</span>
          <span class="value best-move">{{
            a.bestMove || ('ANALYSIS.CALCULATING' | translate)
          }}</span>
        </div>
        @if (a.pv.length > 0) {
        <div class="info-row">
          <span class="label">{{ 'ANALYSIS.LINE' | translate }}</span>
          <span class="value pv-line">{{ a.pv.slice(0, 5).join(' ') }}</span>
        </div>
        }
      </div>

      <button (click)="showBestMove()" class="hint-button">
        {{ 'ANALYSIS.SHOW_HINT' | translate }}
      </button>
      } @else {
      <div class="no-analysis">
        <p>{{ 'ANALYSIS.MAKE_MOVE' | translate }}</p>
      </div>
      }
    </div>
  </div>
</div>
